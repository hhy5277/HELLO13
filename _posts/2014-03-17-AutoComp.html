---
layout: post
title: JavaScript实现Input自动补全
tag: JS
description: JavaScript实现Input自动补全
keywords: 自动补全,javascript,input,有田十三
---

效果演示：
<div id='wrap'>
    <input type="text" id='search'>
</div>

<br>
<br>
接口调用如下代码：<br>
{% highlight html %}
<script>
    window.onload = new Input().init({
        inputId: /* input id, 必填 */,
        wrapId: /* 父div id, 必填 */
    }); 
</script>
{% endhighlight %}
<br>

参数使用方法如下：<br>
{% highlight html %}
<script>
    window.onload = new Input().init({
        inputId: /* input id, 必填 */,
        wrapId: /* 父div id, 必填 */,
        data: [/* 数据 */],
        width: 400,
        height: 30
    }); 
</script>
{% endhighlight %}
<br><br>

<h1>轮子设计注意事项</h1>
<strong>1.oninput、onchange、onpropertychange事件的区别</strong><br>

<strong>2.循环绑定事件</strong><br>
简单方法，建立一个闭包保存变量。
{% highlight javascript %}
for (var i = 0, len = str.length; i < len; i++) {
    var li = document.createElement('div');

    li.innerHTML = str[i];
    (function() {
        var p = i;
        addEvent(li, 'mousedown', function() {  
            _this.value = str[p];
            wrap.removeChild($$('list'));
        });
    })();

    ul.appendChild(li);
}
{% endhighlight %}

<strong>3.悬浮框样式</strong><br>
悬浮框position为absolute，通过获得input的offsetTop和offsetLeft来计算悬浮框的top和left，进行定位。最后添加到父div。
{% highlight javascript %}
ul.style.top = this.offsetTop + that.height + 'px';
ul.style.left = this.offsetLeft + 'px';
{% endhighlight %}
<br>

<strong>4.绑定键盘事件</strong><br>

附AutoComp.js源码：<a href="https://github.com/yooungt13/yooungt13.github.com/blob/master/public/javascripts/autocomp.js">[传送门]</a>

<script src="../public/javascripts/autocomp.js"></script>